// This code was generated by FFIG <http://ffig.org>.
// Manual edits will be lost.
using System;
using System.Runtime.InteropServices;

namespace Tree_c {

  public class Exception : System.Exception {

    [DllImport("Tree_c")]
    private static extern void Tree_clear_error();

    [DllImport("Tree_c")]
    private static extern IntPtr Tree_error();

    public Exception() : base(Marshal.PtrToStringAnsi(Tree_error())) {
      Tree_clear_error();
    }
  }

  public class Tree {

    [DllImport("Tree_c")]
    private static extern int Tree_Tree_dispose(IntPtr c_obj);

    [DllImport("Tree_c")]
    private static extern int Tree_Tree_create(int levels, out IntPtr ptr);

    [DllImport("Tree_c")]
    private static extern int Tree_Tree_left_subtree(IntPtr c_obj, out IntPtr rv);

    [DllImport("Tree_c")]
    private static extern int Tree_Tree_right_subtree(IntPtr c_obj, out IntPtr rv);

    [DllImport("Tree_c")]
    private static extern int Tree_Tree_data(IntPtr c_obj, out int rv);

    [DllImport("Tree_c")]
    private static extern int Tree_Tree_set_data(IntPtr c_obj, int x);

    protected IntPtr c_obj_;

    public Tree(int levels) {
      int rc = Tree_Tree_create(levels, out c_obj_);
      if(rc != 0) {
        throw new Tree_c.Exception();
      }
    }

    protected Tree() {
    }

    protected Tree(IntPtr c_obj) {
      c_obj_ = c_obj;
    }

    ~Tree() {
      Tree_Tree_dispose(c_obj_);
    }

    public Tree left_subtree() {
      IntPtr rv = IntPtr.Zero;
      int rc = Tree_Tree_left_subtree(c_obj_, out rv);
      if(rc != 0) {
        throw new Tree_c.Exception();
      }
      if(rv == IntPtr.Zero) {
        return null;
      }
      return new Tree(rv);
    }

    public Tree right_subtree() {
      IntPtr rv = IntPtr.Zero;
      int rc = Tree_Tree_right_subtree(c_obj_, out rv);
      if(rc != 0) {
        throw new Tree_c.Exception();
      }
      if(rv == IntPtr.Zero) {
        return null;
      }
      return new Tree(rv);
    }

    public int data() {
      int rv;
      int rc = Tree_Tree_data(c_obj_, out rv);
      if(rc != 0) {
        throw new Tree_c.Exception();
      }
      return rv;
    }

    public void set_data(int x) {
      int rc = Tree_Tree_set_data(c_obj_, x);
      if(rc != 0) {
        throw new Tree_c.Exception();
      }
    }
  }

}
